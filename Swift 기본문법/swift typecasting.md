# 타입 캐스팅

------

### 타입캐스팅이란?

인스턴스 **타입을 확인**하거나, 인스턴스 타입을 **부모클래스** 또는 **자식클래스**처럼 **다루기 위해 사용**한다.

- Swift에서 타입 캐스팅은 `is` 와 `as` 연산자를 사용하여 구현함
- 이 두 연산자는 값 타입을 확인하거나, 값을 다른 타입으로 전환(`Cast`)하는 간단하고 표현적인 방법을 제공함
- 타입 캐스팅을 통해 특정 클래스 인스턴스의 타입을 확인 가능
- 타입 캐스팅을 통해 프로토콜을 준수하는지도 확인가능

------

### 먼저 알아볼 것은 **‘타입 캐스팅을 통해 특정 클래스 인스턴스의 타입을 확인 가능'** 부분이다.

인스턴스 타입은 `is` 키워드를 사용해서 확인 가능하다.

```swift
class Person {
	var name: String
	init(name: String) {
		self.name = name
	}
}

var Reswo = Person(name: "승재")

if Reswo is Person {
	print(true) //true
}
```

`Person` 이라는 클래스를 정의하고 초깃값이 없기 때문에 초기화를 해줬다. 그리고 `is` 키워드를 통해 ‘`Reswo`’이 ‘`Person`’ 타입이 맞는지 확인한다.

이런 식으로 인스턴스 자체를 확인할 수 도 잇지만, 인스턴스의 프로퍼티도 확인 가능하다.

```swift
var Reswo = Person(name: "승재")

if Reswo.name is String {
	print(true)
}
```

`is` 타입 확인 키워드는 항상 `true` 이여야만 한다는 걸 기억해야 한다!

------

## 다운 캐스팅

특정 클래스 타입의 상수 또는 변수는 하위 클래스의 인스턴스를 참조할 수 있다. 이 경우, 타입캐스트 연산자 `as?` 또는 `as!` 를 사용하여 서브 클래스 타입으로 `downcasting`을 시도할 수 있다.

다운 캐스팅은 실패할 여지가 충분히 있기 때문에 타입 캐스트 연산자는 두 가지 형태로 제공된다.

------

### as?

- 조건부 형식인 `as?` 는 다운 캐스팅하려는 타입의 옵셔널 값을 반환한다.
- 캐스팅에 실패할 경우 `nil`을 반환한다.
- 캐스팅에 성공하면 옵셔널 타입으로 인스턴스를 반환한다.
- 실패할 가능성이 있으면 조건부 연산자인 `as?`를 사용
- 런타임에 실행된다.

------

### as!

- 강제 형식인 `as!` 는 강제 언래핑을 하여 값을 반환한다.
- 캐스팅에 실패할 경우 런타임 오류가 발생한다.
- 캐스팅에 성공할 경우 옵셔널이 아닌 인스턴스를 반환한다.
- 항상 성공할 것이라는 확신이 있으면 강제 형식인 `as!` 를 사용
- 런타임에 실행된다.